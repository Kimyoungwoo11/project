<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/mainLayout}">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="imagetoolbar" content="no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="title" content="웹사이트">
    <meta name="description" content="웹사이트입니다.">
    <meta name="keywords" content="키워드,키워드,키워드">
    <meta property="og:title" content="웹사이트">
    <meta property="og:description" content="웹사이트입니다">
    <meta property="og:image" content="https://웹사이트/images/opengraph.png">
    <meta property="og:url" content="https://웹사이트">
    <title>강의</title>
    <link rel="stylesheet" href="../css/tube/setting.css">
    <link rel="stylesheet" href="../css/tube/plugin.css">
    <link rel="stylesheet" href="../css/tube/template.css">
    <link rel="stylesheet" href="../css/tube/common.css">
    <link rel="stylesheet" href="../css/tube/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script type="text/javascript" th:inline="javascript">
        //template.js의 select부분 지우기
        let category = /*[[${category}]]*/;
         let keyword = /*[[${keyword}]]*/;
        let pageNo = /*[[${pageNo}]]*/;
        if(category==null){
            category="전체";
        }
        $(document).ready(function() {
            $(".selectset-toggle").find("span").text(category);
            const selectsetToggle = document.querySelectorAll(".selectset-toggle");
              const selectsetLink = document.querySelectorAll(".selectset-link");
               selectsetToggle.forEach((buttonElement) => {
                const clickEventHandler = (event) => {
                  event.stopPropagation();
                  const button = event.target.closest(".selectset-toggle");
                  const buttonParent = button.closest(".selectset");
                  buttonParent.classList.toggle("active");
                };
                buttonElement.removeEventListener("click", clickEventHandler);
                buttonElement.addEventListener("click", clickEventHandler);
              });
              $(".selectset-link").click(function() {
                    location.href="/tubecategory?category="+$(this).find("span").text();
                })
            $(".inputset-input").val(keyword);

           // $("#paging>a").each(function(){
                    // $("#paging>a").removeClass("active-fill");
                    // $("#paging.children").value.filter((item) => item == element).addClass("active-fill");

            //})
            function getSiblings(parent, element) {
                return parent.children.text().filter((item) => item == pageNo);
              }
        })
    </script>
</head>

<body>
    <div layout:fragment="content">

        <main class="th-layout-main ">
            <!-- [S]basic-N45 -->
            <div class="basic-N45" data-bid="OKLXlIY0q1">
                <div class="contents-container container-md">
                    <img class="contents-visual img-pc" src="/images/health.jpg" alt="PC 서브 비주얼 이미지">
                    <img class="contents-visual img-mobile" src="/images/health.jpg" alt="모바일 서브 비주얼 이미지">
                    <div class="contents-body">
                        <div class="textset textset-visual">
                            <h2 class="textset-tit">Brand Story</h2>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [E]basic-N45 -->
            <!-- [S]basic-N54 -->
            <div class="basic-N54" data-bid="rilXliy0rt" id="">
                <div class="contents-inner">
                    <div class="contents-container container-md">
                        <div class="tabset tabset-brick">
                            <div class="selectset selectset-round selectset-lg">
                                <button class="selectset-toggle btn" type="button">
                                    <span>전체</span>
                                </button>
                                <ul class="selectset-list">
                                    <li class="selectset-item">
                                        <button class="selectset-link btn" type="button" value="all">
                                            <span>전체</span>
                                        </button>
                                    </li>
                                    <li class="selectset-item">
                                        <button class="selectset-link btn" type="button" value="가슴">
                                            <span>가슴</span>
                                        </button>
                                    </li>
                                    <li class="selectset-item">
                                        <button class="selectset-link btn" type="button" value="등">
                                            <span>등</span>
                                        </button>
                                    </li>
                                    <li class="selectset-item">
                                        <button class="selectset-link btn" type="button" value="어깨">
                                            <span>어깨</span>
                                        </button>
                                    </li>
                                    <li class="selectset-item">
                                        <button class="selectset-link btn" type="button" value="하체">
                                            <span>하체</span>
                                        </button>
                                    </li>
                                    <li class="selectset-item">
                                        <button class="selectset-link btn" type="button" value="복근">
                                            <span>복근</span>
                                        </button>
                                    </li>
                                    <li class="selectset-item">
                                        <button class="selectset-link btn" type="button" value="팔">
                                            <span>팔</span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                            <form action="/tubesearch" method="post">
                                <div class="inputset inputset-lg">
                                    <input type="text" name="keyword" class="inputset-input form-control" placeholder="검색어를 입력해주세요." aria-label="내용"><button class="inputset-icon icon-right icon-search btn" type="submit" aria-label="아이콘"></button>
                                </div>
                            </form>
                        </div>
                        <div class="contents-group">

                            <a href="javascript:void(0);" class="cardset" th:each="list:${tubelist}">
                                <figure class="cardset-figure">
                                    <iframe width="560" height="315" th:src="@{https://www.youtube.com/embed/}+${list.tubelink}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                                </figure>
                                <div class="cardset-body">
                                    <h2 class="cardset-tit">[[${list.exercisename}]]  </h2>
                                    <h3 class="cardset-desc">[[${list.category}]] </h3>
                                    <h3 class="cardset-desc">[[${list.tubename}]] </h3>
                                </div>
                            </a>

                        </div>
                        <nav class="pagiset pagiset-line">
                            <div class="pagiset-ctrl">
                                <a class="pagiset-link pagiset-first" th:href="@{/tubepaging(pageNo=0,category=${category},keyword=${keyword})}">
                                    <span class="visually-hidden">처음</span>
                                </a>
                            </div>
                            <div class="pagiset-ctrl">
                                <a class="pagiset-link pagiset-prev" th:href="@{/tubepaging(pageNo=${pageNo}-1,category=${category},keyword=${keyword})}">
                                    <span class="visually-hidden">이전</span>
                                </a>
                            </div>
                            <div class="pagiset-list" id="paging">
                                <a class="pagiset-link " th:href="@{/tubepaging(pageNo=0,category=${category},keyword=${keyword})}"
                                   th:classappend="${pageNo} == 0 ? 'active-fill'">1</a>
                                <a class="pagiset-link" th:href="@{/tubepaging(pageNo=1,category=${category},keyword=${keyword})}"
                                   th:classappend="${pageNo} == 1 ? 'active-fill'">2</a>
                                <a class="pagiset-link" th:href="@{/tubepaging(pageNo=2,category=${category},keyword=${keyword})}"
                                   th:classappend="${pageNo} == 2 ? 'active-fill'">3</a>
                                <a class="pagiset-link" th:href="@{/tubepaging(pageNo=3,category=${category},keyword=${keyword})}"
                                   th:classappend="${pageNo} == 3 ? 'active-fill'">4</a>
                                <a class="pagiset-link" th:href="@{/tubepaging(pageNo=4,category=${category},keyword=${keyword})}"
                                   th:classappend="${pageNo} == 4 ? 'active-fill'">5</a>
                            </div>
                            <div class="pagiset-ctrl">
                                <a class="pagiset-link pagiset-next" th:href="@{/tubepaging(pageNo=${pageNo}+1,category=${category},keyword=${keyword})}">
                                    <span class="visually-hidden">다음</span>
                                </a>
                            </div>
                            <div class="pagiset-ctrl">
                                <a class="pagiset-link pagiset-last" th:href="@{/tubepaging(pageNo=4,category=${category},keyword=${keyword})}">
                                    <span class="visually-hidden">마지막</span>
                                </a>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>

        </main>

        <script src="../js/tube/setting.js"></script>
        <script src="../js/tube/plugin.js"></script>
        <script src="../js/tube/template.js"></script>
        <script src="../js/tube/common.js"></script>
        <script src="../js/tube/script.js"></script>
    </div>
</body>